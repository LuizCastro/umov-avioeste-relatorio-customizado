<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <title>CHECK LIST - ENTREGA TÉCNICA</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Avioeste">
    <meta name="keywords" content="">
    <meta name="author" content="MCTED">
    <meta http-equiv="cache-control" content="max-age=864000" />
    <link rel="stylesheet" type="text/css" href="css/print.css">
    <link rel="stylesheet" type="text/css" href="css/screen.css">
    <script src="js/index.js"></script>
    <script src="js/jquery-3.7.1.min.js"></script>
    <title>Relatório A4 Dinâmico</title>
</head>
<body id="body">
    <div class="no-print navbar mg-30">
        <a href="javascript:window.print()" class="active">Imprimir</a>
    </div>
    <div class="page" id="capa"></div>
    <script>
        // window.paginarA4 = paginarA4;
        function carregarComponentHTML(id, arquivo) {
            fetch(arquivo)
                .then(res => res.text())
                .then(html => document.getElementById(id).innerHTML = html);
        }
        async function getdata(task) {
            var url = `https://trlvvv52244il555u3yfuqampe0lulvd.lambda-url.us-east-1.on.aws/?pedido=${task}`;
            // let response = await fetch(url);
            // let userData = await response.json();
            // console.log(userData);

            $.ajax({
                url: url,
                type: 'GET',
                crossDomain: true,
                contentType: 'application/json',
                success: function (response) {
                    if (response) {
                        setData(response);
                    }
                    return response;
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    return { 'erro': 'falha ao carregar pedido, tente novamente' };
                }
            });
        }
        function addTableEl(id, arquivo) {
            const table = document.getElementById(id);
            fetch(arquivo)
                .then(res => res.text())
                .then(html => table.appendChild(html));
        }

        function setCabecalho(pedido, data) {
            $('#pedido').text(pedido);
            $('#vendedor').text(data.vendedor);
            $('#categoriaVendas').text(data.categoriaVendas);
            $('#integradora').text(data.integradora);
            $('#projeto').text(data.projeto);
        }
        function setDadosCliente(data) {
            //Dados do Cliente
            $('#cliente').text(data.cliente);
            $('#endereco').text(data.endereco);
            $('#municipio').text(data.municipio);
            $('#cep').text(data.cep);
            $('#uf').text(data.uf);
            $('#cpf').text(data.cpf);
            $('#ie').text(data.ie);
            $('#contato').text(data.contato);
            $('#telefone').text(data.telefone);
            $('#celular').text(data.celular);
        }
        function setParticipantes(data) {
            //Participantes
            for (let index = 1; index <= data.length; index++) {
                let idNome = `#participante_nome_${index}`;
                let idEmpresa = `#participante_empresa_${index}`;
                $(idNome).text(data[index - 1].Nome);
                $(idEmpresa).text(data[index - 1].Empresa);
            }
        }
        function setInformacoesPreliminares(data) {
            $('#cliente').text(data.cliente);
            $('#largura').text(data.largura);
            $('#comprimento').text(data.comprimento);
            $('#altura_central').text(data.altura_central);
            $('#altura_lateral').text(data.altura_lateral);
            $('#energia').text(data.energia);
            $('#velocidade_ar_desejada').text(data.velocidade_ar_desejada);
            $('#tempo_renovacao_ar').text(data.tempo_renovacao_ar);
            $('#pressao_trabalho').text(data.pressao_trabalho);
            $('#tipo_construcao').text(data.tipo_construcao);
            $('#estrutura_mureta').text(data.estrutura_mureta);
            $('#distancia_entre_galpoes').text(data.distancia_entre_galpoes);
            $('#comprimento_vao').text(data.comprimento_vao);
            $('#consideracaoes_iniciais').text(data.consideracaoes_iniciais);
            $('#descreva_consideracaoes_iniciais').text(data.descreva_consideracaoes_iniciais);
            $('#foto_padrao').text(data.foto_padrao);
            $('#foto_padrao_1').text(data.foto_padrao_1);
            $('#foto_padrao_2').text(data.foto_padrao_2);
            $('#foto_padrao_3').text(data.foto_padrao_3);
            $('#foto_padrao_4').text(data.foto_padrao_4);
            $('#foto_padrao_5').text(data.foto_padrao_5);
            $('#foto_padrao_6').text(data.foto_padrao_6);
            $('#foto_padrao_7').text(data.foto_padrao_7);
            $('#foto_padrao_8').text(data.foto_padrao_8);
            $('#foto_padrao_9').text(data.foto_padrao_9);
            $('#foto_padrao_10').text(data.foto_padrao_10);
        }

        function setData(data) {
            carregarComponentHTML("capa", "/components/capa.html");
            // setCabecalho(data.pedido, data.cabecalho);
            // setDadosCliente(data.dadosCliente);
            // setParticipantes(data.participantes);
            // setInformacoesPreliminares(data.informacoesPreliminares);
            // paginarA4('content', 'header', 'footer');
        }
        $(document).ready(function () {
            let params = new URLSearchParams(document.location.search);
            let pedido = params.get("pedido");
            if (pedido) {
                let data = getdata(pedido);
            } else {
                alert('Pedido Obrigatório');
            }
        });</script>
</body>

</html>